<div class="page-header">
  <div>
    <h2 class="m0">Patients</h2>
    <p class="m0">Manage registered patients</p>
  </div>
  <button
    type="button"
    class="page-header__action"
    data-open-modal="add-patient"
    data-modal-mode="create"
  >
    Add patient
  </button>
</div>

<div class="table-wrap mt1">
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Full name</th>
        <th>Birth date</th>
        <th>Condition</th>
        <th style="width:110px;">Actions</th>
      </tr>
    </thead>
    <tbody>
      {{#each patients}}
        <tr>
          <td>{{id}}</td>
          <td>
            <a
              href="/patients/{{id}}"
              data-open-modal="view-patient"
              data-patient-id="{{id}}"
              data-patient-name="{{fullName}}"
              data-patient-birth="{{birthDate}}"
              data-patient-illness="{{#if illness}}{{illness}}{{/if}}"
            >
              {{fullName}}
            </a>
          </td>
          <td>{{birthDate}}</td>
          <td class="table-condition">
            {{#if illness}}
              {{illness}}
            {{else}}
              <span class="text-muted">No record</span>
            {{/if}}
          </td>
          <td class="table-actions">
            <button
              type="button"
              class="icon-button secondary inline"
              title="Edit patient"
              aria-label="Edit patient"
              data-open-modal="add-patient"
              data-modal-mode="edit"
              data-patient-id="{{id}}"
              data-patient-name="{{fullName}}"
              data-patient-birth="{{birthDate}}"
              data-patient-illness="{{#if illness}}{{illness}}{{/if}}"
            >
              ✏️
            </button>
            <form
              action="/patients/{{id}}/delete"
              method="POST"
              class="inline-form"
              data-confirm="delete"
              data-confirm-name="{{fullName}}"
            >
              <button
                type="submit"
                class="icon-button secondary inline"
                title="Delete patient"
                aria-label="Delete patient"
              >🗑️</button>
            </form>
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>
</div>

{{! Pagination (if you implemented it) }}
{{#if pagination}}
  <nav class="pagination">
    {{#if pagination.prev}}<a href="{{pagination.prev}}">Prev</a>{{/if}}
    {{#each pagination.pages}}
      {{#if this.active}}<span class="active">{{this.n}}</span>{{else}}<a
          href="{{this.url}}"
        >{{this.n}}</a>{{/if}}
    {{/each}}
    {{#if pagination.next}}<a href="{{pagination.next}}">Next</a>{{/if}}
  </nav>
{{/if}}

{{> patients/addPatient}}

{{> patients/viewPatient}}

<script src="/js/patients.js" defer></script>
